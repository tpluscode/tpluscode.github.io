<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: virtuoso | Tomasz Pluskiewicz]]></title>
  <link href="http://t-code.pl/blog/categories/virtuoso/atom.xml" rel="self"/>
  <link href="http://t-code.pl/"/>
  <updated>2021-03-28T12:28:09+00:00</updated>
  <id>http://t-code.pl/</id>
  <author>
    <name><![CDATA[Tomasz Pluskiewicz]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[x86 != x64]]></title>
    <link href="http://t-code.pl/blog/2011/11/x86-not-equal-to-x64/"/>
    <updated>2011-11-23T18:41:27-05:00</updated>
    <id>http://t-code.pl/blog/2011/11/x86-not-equal-to-x64</id>
    <content type="html"><![CDATA[<p><img class="center" src="/uploads/2011/11/957161.jpg" width="450" height="151" title="‘Visual C++ Redistributable 2008’" ></p>

<p>Ever tried running some piece of application compiled for the 64bit platform? After a few years there finally are more
and more applications fully (I think) benefiting from the extra 32 bits.</p>

<p>So I am exploring <a href="http://openlinksw.com/">OpenLink</a> <a href="http://virtuoso.openlinksw.com">Virtuoso</a>, which in it’s open
source variation comes as a humble downloadable zip. Runs fine on my laptop but didn’t work at first on my VPS. Why?
Because msvcr100.dll was missing. The commercial flavour of this server comes with an installer, which does include all
required dependencies.</p>

<!--more-->

<p>Easy though. All I needed was Visual C++ Redistributable 2010 <strong>(x86)</strong>, right? Right. So I downloaded, installed and it
didn’t help, which left me baffled for a moment.</p>

<p>Time flies…</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/11/105440hletokbai.jpg" width="263" height="280" title="‘hourglass’" ></p>

<p>…and flies some more…</p>

<p>What did I realize? I was installing… <strong>the wrong redist package</strong>! Install Microsoft Visual C++ 2010 Redistributable
Package <strong>(x64)</strong> and all is fine.</p>

<p>And I was blaming OpenLink. How lame :P</p>

<p>Hourglass image Copyright © Salvatore Vuono</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing OntoWiki on Windows with Virtuoso]]></title>
    <link href="http://t-code.pl/blog/2011/11/installing-ontowiki-on-windows-with-virtuoso/"/>
    <updated>2011-11-19T16:52:33-05:00</updated>
    <id>http://t-code.pl/blog/2011/11/installing-ontowiki-on-windows-with-virtuoso</id>
    <content type="html"><![CDATA[<p><img class="right" src="http://semanticweb.org/images/Semantic-Web-Logo-by-W3C.png" width="129" height="155" title="‘Semantic Web’ ‘Semantic Web logo’" ></p>

<p>Recently I’ve been experimenting with <a href="http://semanticweb.org">Semantic Web</a> techonogies. Currently I’m trying to choose
tools for editing the ontology and more importantly instances. There are a number of tools, both commercial and free
including my favourites: <a href="http://protege.stanford.edu">Protégé</a>, <a href="http://neon-toolkit.org">NeON toolkit</a> or
<a href="http://www.topquadrant.com/composer/">Top Braid Composer</a>. Each of those have some problem. NeON is nice but desktop
only, Top Braid is not free and Protégé is very complex. Not to mention it comes in versions 3.x and 4.x
with <a href="http://protegewiki.stanford.edu/wiki/Protege4Migration">different set of functions</a> which only makes the confusion grow…</p>

<!--more-->

<p>In my search I have found <a href="http://ontowiki.net/Projects/OntoWiki">OntoWiki</a>. It is web-based, seems user-friendly and
it’s recommended backend is Virtuoso, which I chose for it is Open Source and presumably mature and feature-rich. There
is a walkthrough on <a href="http://code.google.com/p/ontowiki/wiki/UsingOntoWikiWithVirtuoso">setting up OntoWiki with Virtuoso</a>, which I followed. Unfortunately things don’t
always go right. Below are the problems I encountered and solutions which helped.</p>

<h2 id="problem-1-setting-up-odbc">Problem 1: Setting up ODBC</h2>

<p>My server is running Windows 2008 64bit. for now I have installed Virtuoso trial using the msi package available for
download from OpenLink’s website. During installation it automatically sets up a System DSN:</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/11/virtuoso-dsn.png" width="300" height="209" title="Default Virtuoso DSN" > There is a
problem however. When I ran the test php script instead of graphs listed I got an error saying:</p>

<p><code>
[Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application
</code></p>

<h3 id="solution">Solution</h3>

<p>To resolve this a DSN must be created using 32-bit version of obdcad32.exe, which sits in c:\windows\sysWOW64. There is
a problem however: installing 64-bit Virtuoso package does not install 32-bti driver. To get those you must install the
Connectivity Suite available as a free download from <a href="http://download.openlinksw.com/virtwiz/">OpenLink’s website</a>.
Then run odbcad32.exe to create a System DSN choosing OpenLink virtuoso driver. Now the php test script should work.
Or should it?</p>

<h2 id="problem-2-unexpected-tpaamayimnekudotayim">Problem 2: Unexpected T_PAAMAYIM_NEKUDOTAYIM</h2>

<p>I’m not a PHP developer and so seeing the above for the first in my life was pretty confusing. All it means is “double
colon”. The problem comes from a file virtuoso.php,where it says:</p>

<p><code>php
if ($result == $queryCache::ERFURT_CACHE_NO_HIT) {
}
</code></p>

<h3 id="solution-1">Solution</h3>

<p>Numerous people on the web suggest that instead of the double colon the arrow (-&gt;) should be used to access a member on
this variable. However this was not the case. ERFURT_CACHE_NO_HIT is a constant field and only changing the above to a
static call on the class resolved this issue:</p>

<p><code>php
if ($result ==
     Erfurt_Cache_Frontend_QueryCache::ERFURT_CACHE_NO_HIT) {
}
</code></p>

<p>I have filed an <a href="https://github.com/AKSW/Erfurt/issues/5">issue</a> in Erfurt framework git repository.</p>

<h2 id="problem-3-zendconfiginiurlbase">Problem 3: Zend_Config_Ini::urlBase</h2>

<p>Ok so finally I managed to run OntoWiki and my eyes saw the news/logon page. My url for now is uninteresting 
http://localhost:9454. Manual says to login as Admin with no password. Doing it points my browser to 
http://localhost:9454index.php/application/login. Diagnosis: wrong action attribute on form.</p>

<h3 id="solution-2">Solution</h3>

<p>I haven’t actually resolved this. A workaround is described here: <a href="http://code.google.com/p/ontowiki/issues/detail?id=1004">http://code.google.com/p/ontowiki/issues/detail?id=1004</a></p>

<h2 id="problem-4-url-routing">Problem 4: URL routing</h2>

<p>Even though I corrected how OntoWiki constructs URLs, when I tried to log in IIS returns 404 response for URL 
http://localhost:9454/application/login (and probably would for any URL). The reason is that IIS does not understand 
.htaccess files (obviously!)</p>

<h3 id="solution-3">Solution</h3>

<p>Google pointed me to this post: <a href="http://blog.wilgucki.pl/2010/12/zend-framework-na-iis.html">http://blog.wilgucki.pl/2010/12/zend-framework-na-iis.html</a>.</p>

<p>``` xml
<?xml version="1.0" encoding="UTF-8"?></p>
<configuration>
<system.webServer>
  <handlers>
     <add name="deny ini" verb="*" path="*.ini" type="System.Web.HttpForbiddenHandler" />
  </handlers>
  <rewrite>
     <rules>
       <rule name="Don&#039;t rewrite physical files" stopProcessing="true">
         <match url="((extensions|libraries).*|\.(js|ico|gif|jpg|png|css|php|swf|json))$" />
         <conditions logicalGrouping="MatchAny">
           <add input="{REQUEST_FILENAME}" matchType="IsFile" pattern="" ignoreCase="false" />
           <add input="{REQUEST_FILENAME}" matchType="IsDirectory" pattern="" ignoreCase="false" />
         </conditions>
         <action type="None" />
       </rule>
       <rule name="Redirect favicon" stopProcessing="true">
         <match url="^favicon\.(.*)$" />
         <action type="Redirect" url="application/favicon.{R:1}" />
       </rule>
       <rule name="Rewrite" stopProcessing="true">
         <match url="^.*$" />
         <serverVariables>
           <set name="ONTOWIKI_APACHE_MOD_REWRITE_ENABLED" value="true" />
         </serverVariables>
         <action type="Rewrite" url="index.php" />
       </rule>
     </rules>
   </rewrite>
</system.webServer>
</configuration>
<p>```</p>

<p>Basically you need to add the above web.config file to OntoWiki’s root folder to add rules for ISS’ URL rewrite module.
You can read more on <a href="https://github.com/AKSW/OntoWiki/wiki/Install-on-IIS">OntoWiki’s GitHub wiki</a></p>

<h2 id="problem-5-unknown-user-identifier-admin">Problem 5: Unknown user identifier (Admin)</h2>

<p>OntoWki’s wiki says that a fresh install should have a predefined user Admin. For me logging in fails with an error.
Presumably this is due to invalid or incomplete model created by OntoWiki when it first ran. This model contains user
credentials and user permissions.</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/11/ontowiki-unknown-user-login1.png" width="270" height="294" title="‘ontowiki - unknown user login’" ></p>

<h3 id="solution-4">Solution</h3>

<p>The above problem remains a mystery, although I did manage to resolve it with help of <a href="http://sebastian.tramp.name">Sebastian Tramp</a>
from the University of Lepzig.</p>

<p>What I did was first log in to OntoWiki using Virtuoso’s admin credentials, which works as access for <em>SuperAdmin</em>.
Then I deleted Configuration KB as shown below.</p>

<p><img class="center" src="uploads/2011/11/delete-knowledgebase.png" width="515" height="305" title="‘delete knowledgebase’" ></p>

<p>This caused Virtuoso to complain it could not get access to <code>%OntoWikiRoot%/libraries\Erfurt\Erfurt\include\SysOntLocal.rdf</code>
due to configuration. However this was not the case.</p>

<p>What helped though was deleting those two files and then deleting Virtuoso Database to make sure I was starting from scratch.</p>

<p>As an effect, the next time I ran OntoWiki a proper model was created and I was then able to log in as Admin.</p>

]]></content>
  </entry>
  
</feed>

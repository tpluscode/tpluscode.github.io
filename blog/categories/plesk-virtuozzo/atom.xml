<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: plesk virtuozzo | Tomasz Pluskiewicz]]></title>
  <link href="http://t-code.pl/blog/categories/plesk-virtuozzo/atom.xml" rel="self"/>
  <link href="http://t-code.pl/"/>
  <updated>2021-03-28T12:28:09+00:00</updated>
  <id>http://t-code.pl/</id>
  <author>
    <name><![CDATA[Tomasz Pluskiewicz]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[No disk space, hidden Virtuozzo, crouching MSSQL]]></title>
    <link href="http://t-code.pl/blog/2011/07/hidden-virtuozzo-crouching-mssql/"/>
    <updated>2011-07-02T14:44:53-04:00</updated>
    <id>http://t-code.pl/blog/2011/07/hidden-virtuozzo-crouching-mssql</id>
    <content type="html"><![CDATA[<p>Sometimes the real reason for some events may be very obscure.</p>

<p>Just minutes ago my VPS experienced an unexpected problem: no disk space. Not at all. Not a single byte! And naturally
I found out only by chance.</p>

<h2 id="cannot-start-application-pool">Cannot start application pool</h2>
<p>I logged on to my VPS and as usually, Server Manager opens. What caught my attention were</p>

<blockquote>
  <p>Events: 16 errors, 9 informational in the last 24 hours</p>
</blockquote>

<!--more-->

<p>Some of them similar to the below:</p>

<blockquote>
  <p>A process serving application pool ‚PleskControlPanel’ reported a failure trying to read configuration during startup.
The process id was ’85448′. Please check the Application Event Log for further event messages logged by the worker
process on the specific error.</p>

  <p>The data field contains the error number.</p>
</blockquote>

<p>WTF? I immediately went to Application pools in IIS to try starting the failed pools and I got an error message dialog:</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/07/cannotwriteconfiguration.gif" width="404" height="230"></p>

<p>Almost like the dialog above, except the “<em>due to insufficient permissions</em><span>” part. It simply said that
config file could not be written to. I assumed permission problems though but it quickly turned out not to be the issue.</span></p>

<p>To diagnose the problem I downloaded <a href="http://www.jam-software.com/treesize_free/">JAM Software TreeSize Free </a> to find
out where has my space gone.</p>

<h2 id="hidden-virtuozzo">Hidden Virtuozzo</h2>

<p>Scanning with TreeSize didn’t help at first. It showed some 15 GB in Windows dir, and some more gigabytes in other
folders. Nothing out of the ordinary, except one thing.</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/07/vzquota-folder.gif" width="275" height="27"></p>

<p>Quick google revealed it’s a folder used by Parallels, but it cannot be accessed from within a container. Unfortunately
googling for vzquota and disk space related problems proved fruitless. Still baffled I looked in Plesk’s and Virtuozzo’s
every corner but found nothing.</p>

<h2 id="crouching-mssql">Crouching MSSQL</h2>

<p>Almost resigned I decided to try the oldest solution of all - system reboot. After system has started I ran TreeSize
again and here’s what I saw:</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/07/mssql-huge-error-log.gif" width="387" height="141"></p>

<p>Pretty cool huh? :) MS SQL had kept the file locked, so it didn’t show up when I’d scanned the drive for the first time.</p>

<p>I never actually found out what the problem was. Not that it matters anymore. I’ve learned though what everyone probably
knows subconsciously. Real reasons often remain hidden from our view…</p>

<p>Quite philosophical that :)</p>
]]></content>
  </entry>
  
</feed>


<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>No disk space, hidden Virtuozzo, crouching MSSQL - Tomasz Pluskiewicz</title>
	<meta name="author" content="Tomasz Pluskiewicz">

	
	<meta name="description" content="No Disk Space, Hidden Virtuozzo, Crouching MSSQL Sometimes the real reason for some events may be very obscure. Just minutes ago my VPS experienced &hellip;">
    
        <meta name="keywords" content="semantic web, .net, programming, blog">
    

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="http://t-code.pl/atom.xml" rel="alternate" title="Tomasz Pluskiewicz" type="application/atom+xml">
	
	<link rel="canonical" href="http://t-code.pl/blog/2011/07/hidden-virtuozzo-crouching-mssql/">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="/stylesheets/resume.css" media="all" />
<link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print" />
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-24217426-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/1497654c2d1af3cef4987234d1aced57?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<hgroup>
  <h1><a href="/">Tomasz Pluskiewicz</a></h1>
  
  <h2>Awaiting the Semantic Web</h2>
  
</hgroup>

<nav id="main-nav"><ul class="main">
    <li><a href="/me">About</a></li>
    <li><a href="/resume">Resume</a></li>
    <li><a href="/">Blog</a></li>
    <li><a href="/talks">Presentations</a></li>
    <li><a href="/projects">Projects</a></li>
    <li><a href="/links">Links</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>


</nav>
<nav id="flairs">
    <a href="http://www.w3.org/RDF/" title="RDF Resource Description Framework" target='_blank'> 
        <img border="0" src="http://www.w3.org/RDF/icons/rdf_developer_button.48" alt="RDF Resource Description Framework Developer Icon"/>
    </a>

    <a href="http://stackoverflow.com/users/1103498/tomasz-pluskiewicz" target='_blank'>
        <img src="http://stackoverflow.com/users/flair/1103498.png?theme=clean" width="208" height="58" alt="profile for Tomasz Pluskiewicz at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Tomasz Pluskiewicz at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
    </a>

    <a href='https://www.openhub.net/accounts/132022?ref=Detailed' target='_blank'>
        <img alt='Open Hub profile for Tomasz Pluskiewicz' border='0' height='35' src='https://www.openhub.net/accounts/132022/widgets/account_detailed.gif' width='230' />
    </a>
</nav>

<nav id="smallFlairs">
    <a href='https://www.openhub.net/accounts/132022?ref=Tiny' target='_blank'>
        <img alt='Open Hub profile for Tomasz Pluskiewicz' border='0' height='15' src='https://www.openhub.net/accounts/132022/widgets/account_tiny.gif' width='80' />
    </a>
</nav>

<nav id="sub-nav">
	<div class="social">
		
		
		
		
			<a class="twitter" href="http://twitter.com/tpluscode" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/tpluscode" title="GitHub">GitHub</a>
		
		
        
            <a class="stackoverflow" href="http://stackoverflow.com/users/1103498/tomasz-pluskiewicz" title="StackOverflow"></a>
        
        
            <a class="semanticweb" href="http://answers.semanticweb.com/users/1788/tomasz-pluskiewicz" title="SemanticWeb answers"></a>
        
        <a class="ohloh" href="https://www.openhub.net/accounts/132022?ref=Rank" title="Ohloh rank"></a>
		
			<a class="linkedin" href="http://www.linkedin.com/in/tpluskiewicz" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">No Disk Space, Hidden Virtuozzo, Crouching MSSQL</h1>
	<div class="entry-content" itemprop="articleBody"><p>Sometimes the real reason for some events may be very obscure.</p>

<p>Just minutes ago my VPS experienced an unexpected problem: no disk space. Not at all. Not a single byte! And naturally
I found out only by chance.</p>

<h2 id="cannot-start-application-pool">Cannot start application pool</h2>
<p>I logged on to my VPS and as usually, Server Manager opens. What caught my attention were</p>

<blockquote>
  <p>Events: 16 errors, 9 informational in the last 24 hours</p>
</blockquote>

<!--more-->

<p>Some of them similar to the below:</p>

<blockquote>
  <p>A process serving application pool ‚PleskControlPanel’ reported a failure trying to read configuration during startup.
The process id was ’85448′. Please check the Application Event Log for further event messages logged by the worker
process on the specific error.</p>

  <p>The data field contains the error number.</p>
</blockquote>

<p>WTF? I immediately went to Application pools in IIS to try starting the failed pools and I got an error message dialog:</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/07/cannotwriteconfiguration.gif" width="404" height="230" /></p>

<p>Almost like the dialog above, except the “<em>due to insufficient permissions</em><span>” part. It simply said that
config file could not be written to. I assumed permission problems though but it quickly turned out not to be the issue.</span></p>

<p>To diagnose the problem I downloaded <a href="http://www.jam-software.com/treesize_free/">JAM Software TreeSize Free </a> to find
out where has my space gone.</p>

<h2 id="hidden-virtuozzo">Hidden Virtuozzo</h2>

<p>Scanning with TreeSize didn’t help at first. It showed some 15 GB in Windows dir, and some more gigabytes in other
folders. Nothing out of the ordinary, except one thing.</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/07/vzquota-folder.gif" width="275" height="27" /></p>

<p>Quick google revealed it’s a folder used by Parallels, but it cannot be accessed from within a container. Unfortunately
googling for vzquota and disk space related problems proved fruitless. Still baffled I looked in Plesk’s and Virtuozzo’s
every corner but found nothing.</p>

<h2 id="crouching-mssql">Crouching MSSQL</h2>

<p>Almost resigned I decided to try the oldest solution of all - system reboot. After system has started I ran TreeSize
again and here’s what I saw:</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/07/mssql-huge-error-log.gif" width="387" height="141" /></p>

<p>Pretty cool huh? :) MS SQL had kept the file locked, so it didn’t show up when I’d scanned the drive for the first time.</p>

<p>I never actually found out what the problem was. Not that it matters anymore. I’ve learned though what everyone probably
knows subconsciously. Real reasons often remain hidden from our view…</p>

<p>Quite philosophical that :)</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2021

    Tomasz Pluskiewicz


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'tcode';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>

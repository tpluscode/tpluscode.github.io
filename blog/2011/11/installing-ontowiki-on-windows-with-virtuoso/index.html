
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Installing OntoWiki on Windows with Virtuoso - Tomasz Pluskiewicz</title>
	<meta name="author" content="Tomasz Pluskiewicz">

	
	<meta name="description" content="Installing OntoWiki on Windows With Virtuoso Recently I’ve been experimenting with Semantic Web techonogies. Currently I’m trying to choose
tools &hellip;">
    
        <meta name="keywords" content="semantic web, .net, programming, blog">
    

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="http://t-code.pl/atom.xml" rel="alternate" title="Tomasz Pluskiewicz" type="application/atom+xml">
	
	<link rel="canonical" href="http://t-code.pl/blog/2011/11/installing-ontowiki-on-windows-with-virtuoso/">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="/stylesheets/resume.css" media="all" />
<link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print" />
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-24217426-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/1497654c2d1af3cef4987234d1aced57?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<hgroup>
  <h1><a href="/">Tomasz Pluskiewicz</a></h1>
  
  <h2>Awaiting the Semantic Web</h2>
  
</hgroup>

<nav id="main-nav"><ul class="main">
    <li><a href="/me">About</a></li>
    <li><a href="/resume">Resume</a></li>
    <li><a href="/">Blog</a></li>
    <li><a href="/talks">Presentations</a></li>
    <li><a href="/projects">Projects</a></li>
    <li><a href="/links">Links</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>


</nav>
<nav id="flairs">
    <a href="http://www.w3.org/RDF/" title="RDF Resource Description Framework" target='_blank'> 
        <img border="0" src="http://www.w3.org/RDF/icons/rdf_developer_button.48" alt="RDF Resource Description Framework Developer Icon"/>
    </a>

    <a href="http://stackoverflow.com/users/1103498/tomasz-pluskiewicz" target='_blank'>
        <img src="http://stackoverflow.com/users/flair/1103498.png?theme=clean" width="208" height="58" alt="profile for Tomasz Pluskiewicz at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Tomasz Pluskiewicz at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
    </a>

    <a href='https://www.openhub.net/accounts/132022?ref=Detailed' target='_blank'>
        <img alt='Open Hub profile for Tomasz Pluskiewicz' border='0' height='35' src='https://www.openhub.net/accounts/132022/widgets/account_detailed.gif' width='230' />
    </a>
</nav>

<nav id="smallFlairs">
    <a href='https://www.openhub.net/accounts/132022?ref=Tiny' target='_blank'>
        <img alt='Open Hub profile for Tomasz Pluskiewicz' border='0' height='15' src='https://www.openhub.net/accounts/132022/widgets/account_tiny.gif' width='80' />
    </a>
</nav>

<nav id="sub-nav">
	<div class="social">
		
		
		
		
			<a class="twitter" href="http://twitter.com/tpluscode" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/tpluscode" title="GitHub">GitHub</a>
		
		
        
            <a class="stackoverflow" href="http://stackoverflow.com/users/1103498/tomasz-pluskiewicz" title="StackOverflow"></a>
        
        
            <a class="semanticweb" href="http://answers.semanticweb.com/users/1788/tomasz-pluskiewicz" title="SemanticWeb answers"></a>
        
        <a class="ohloh" href="https://www.openhub.net/accounts/132022?ref=Rank" title="Ohloh rank"></a>
		
			<a class="linkedin" href="http://www.linkedin.com/in/tpluskiewicz" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Installing OntoWiki on Windows With Virtuoso</h1>
	<div class="entry-content" itemprop="articleBody"><p><img class="right" src="http://semanticweb.org/images/Semantic-Web-Logo-by-W3C.png" width="129" height="155" title="Semantic Web" alt="Semantic Web logo" /></p>

<p>Recently I’ve been experimenting with <a href="http://semanticweb.org">Semantic Web</a> techonogies. Currently I’m trying to choose
tools for editing the ontology and more importantly instances. There are a number of tools, both commercial and free
including my favourites: <a href="http://protege.stanford.edu">Protégé</a>, <a href="http://neon-toolkit.org">NeON toolkit</a> or
<a href="http://www.topquadrant.com/composer/">Top Braid Composer</a>. Each of those have some problem. NeON is nice but desktop
only, Top Braid is not free and Protégé is very complex. Not to mention it comes in versions 3.x and 4.x
with <a href="http://protegewiki.stanford.edu/wiki/Protege4Migration">different set of functions</a> which only makes the confusion grow…</p>

<!--more-->

<p>In my search I have found <a href="http://ontowiki.net/Projects/OntoWiki">OntoWiki</a>. It is web-based, seems user-friendly and
it’s recommended backend is Virtuoso, which I chose for it is Open Source and presumably mature and feature-rich. There
is a walkthrough on <a href="http://code.google.com/p/ontowiki/wiki/UsingOntoWikiWithVirtuoso">setting up OntoWiki with Virtuoso</a>, which I followed. Unfortunately things don’t
always go right. Below are the problems I encountered and solutions which helped.</p>

<h2 id="problem-1-setting-up-odbc">Problem 1: Setting up ODBC</h2>

<p>My server is running Windows 2008 64bit. for now I have installed Virtuoso trial using the msi package available for
download from OpenLink’s website. During installation it automatically sets up a System DSN:</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/11/virtuoso-dsn.png" width="300" height="209" title="Default Virtuoso DSN" /> There is a
problem however. When I ran the test php script instead of graphs listed I got an error saying:</p>

<figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">[Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application</span></code></pre></td></tr></table></div></figure>

<h3 id="solution">Solution</h3>

<p>To resolve this a DSN must be created using 32-bit version of obdcad32.exe, which sits in c:\windows\sysWOW64. There is
a problem however: installing 64-bit Virtuoso package does not install 32-bti driver. To get those you must install the
Connectivity Suite available as a free download from <a href="http://download.openlinksw.com/virtwiz/">OpenLink’s website</a>.
Then run odbcad32.exe to create a System DSN choosing OpenLink virtuoso driver. Now the php test script should work.
Or should it?</p>

<h2 id="problem-2-unexpected-tpaamayimnekudotayim">Problem 2: Unexpected T_PAAMAYIM_NEKUDOTAYIM</h2>

<p>I’m not a PHP developer and so seeing the above for the first in my life was pretty confusing. All it means is “double
colon”. The problem comes from a file virtuoso.php,where it says:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">==</span> <span class="nv">$queryCache</span><span class="o">::</span><span class="na">ERFURT_CACHE_NO_HIT</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<h3 id="solution-1">Solution</h3>

<p>Numerous people on the web suggest that instead of the double colon the arrow (-&gt;) should be used to access a member on
this variable. However this was not the case. ERFURT_CACHE_NO_HIT is a constant field and only changing the above to a
static call on the class resolved this issue:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="php"><span class="line"><span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">==</span>
</span><span class="line">     <span class="nx">Erfurt_Cache_Frontend_QueryCache</span><span class="o">::</span><span class="na">ERFURT_CACHE_NO_HIT</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>I have filed an <a href="https://github.com/AKSW/Erfurt/issues/5">issue</a> in Erfurt framework git repository.</p>

<h2 id="problem-3-zendconfiginiurlbase">Problem 3: Zend_Config_Ini::urlBase</h2>

<p>Ok so finally I managed to run OntoWiki and my eyes saw the news/logon page. My url for now is uninteresting 
http://localhost:9454. Manual says to login as Admin with no password. Doing it points my browser to 
http://localhost:9454index.php/application/login. Diagnosis: wrong action attribute on form.</p>

<h3 id="solution-2">Solution</h3>

<p>I haven’t actually resolved this. A workaround is described here: <a href="http://code.google.com/p/ontowiki/issues/detail?id=1004">http://code.google.com/p/ontowiki/issues/detail?id=1004</a></p>

<h2 id="problem-4-url-routing">Problem 4: URL routing</h2>

<p>Even though I corrected how OntoWiki constructs URLs, when I tried to log in IIS returns 404 response for URL 
http://localhost:9454/application/login (and probably would for any URL). The reason is that IIS does not understand 
.htaccess files (obviously!)</p>

<h3 id="solution-3">Solution</h3>

<p>Google pointed me to this post: <a href="http://blog.wilgucki.pl/2010/12/zend-framework-na-iis.html">http://blog.wilgucki.pl/2010/12/zend-framework-na-iis.html</a>.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
</pre></td><td class="code"><pre><code class="xml"><span class="line"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class="line"><span class="nt">&lt;configuration&gt;</span>
</span><span class="line"><span class="nt">&lt;system.webServer&gt;</span>
</span><span class="line">  <span class="nt">&lt;handlers&gt;</span>
</span><span class="line">     <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">&quot;deny ini&quot;</span> <span class="na">verb=</span><span class="s">&quot;*&quot;</span> <span class="na">path=</span><span class="s">&quot;*.ini&quot;</span> <span class="na">type=</span><span class="s">&quot;System.Web.HttpForbiddenHandler&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">  <span class="nt">&lt;/handlers&gt;</span>
</span><span class="line">  <span class="nt">&lt;rewrite&gt;</span>
</span><span class="line">     <span class="nt">&lt;rules&gt;</span>
</span><span class="line">       <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;Don&amp;#039;t rewrite physical files&quot;</span> <span class="na">stopProcessing=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class="line">         <span class="nt">&lt;match</span> <span class="na">url=</span><span class="s">&quot;((extensions|libraries).*|\.(js|ico|gif|jpg|png|css|php|swf|json))$&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">         <span class="nt">&lt;conditions</span> <span class="na">logicalGrouping=</span><span class="s">&quot;MatchAny&quot;</span><span class="nt">&gt;</span>
</span><span class="line">           <span class="nt">&lt;add</span> <span class="na">input=</span><span class="s">&quot;{REQUEST_FILENAME}&quot;</span> <span class="na">matchType=</span><span class="s">&quot;IsFile&quot;</span> <span class="na">pattern=</span><span class="s">&quot;&quot;</span> <span class="na">ignoreCase=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">           <span class="nt">&lt;add</span> <span class="na">input=</span><span class="s">&quot;{REQUEST_FILENAME}&quot;</span> <span class="na">matchType=</span><span class="s">&quot;IsDirectory&quot;</span> <span class="na">pattern=</span><span class="s">&quot;&quot;</span> <span class="na">ignoreCase=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">         <span class="nt">&lt;/conditions&gt;</span>
</span><span class="line">         <span class="nt">&lt;action</span> <span class="na">type=</span><span class="s">&quot;None&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">       <span class="nt">&lt;/rule&gt;</span>
</span><span class="line">       <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;Redirect favicon&quot;</span> <span class="na">stopProcessing=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class="line">         <span class="nt">&lt;match</span> <span class="na">url=</span><span class="s">&quot;^favicon\.(.*)$&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">         <span class="nt">&lt;action</span> <span class="na">type=</span><span class="s">&quot;Redirect&quot;</span> <span class="na">url=</span><span class="s">&quot;application/favicon.{R:1}&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">       <span class="nt">&lt;/rule&gt;</span>
</span><span class="line">       <span class="nt">&lt;rule</span> <span class="na">name=</span><span class="s">&quot;Rewrite&quot;</span> <span class="na">stopProcessing=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class="line">         <span class="nt">&lt;match</span> <span class="na">url=</span><span class="s">&quot;^.*$&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">         <span class="nt">&lt;serverVariables&gt;</span>
</span><span class="line">           <span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">&quot;ONTOWIKI_APACHE_MOD_REWRITE_ENABLED&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">         <span class="nt">&lt;/serverVariables&gt;</span>
</span><span class="line">         <span class="nt">&lt;action</span> <span class="na">type=</span><span class="s">&quot;Rewrite&quot;</span> <span class="na">url=</span><span class="s">&quot;index.php&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">       <span class="nt">&lt;/rule&gt;</span>
</span><span class="line">     <span class="nt">&lt;/rules&gt;</span>
</span><span class="line">   <span class="nt">&lt;/rewrite&gt;</span>
</span><span class="line"><span class="nt">&lt;/system.webServer&gt;</span>
</span><span class="line"><span class="nt">&lt;/configuration&gt;</span>
</span></code></pre></td></tr></table></div></figure>

<p>Basically you need to add the above web.config file to OntoWiki’s root folder to add rules for ISS’ URL rewrite module.
You can read more on <a href="https://github.com/AKSW/OntoWiki/wiki/Install-on-IIS">OntoWiki’s GitHub wiki</a></p>

<h2 id="problem-5-unknown-user-identifier-admin">Problem 5: Unknown user identifier (Admin)</h2>

<p>OntoWki’s wiki says that a fresh install should have a predefined user Admin. For me logging in fails with an error.
Presumably this is due to invalid or incomplete model created by OntoWiki when it first ran. This model contains user
credentials and user permissions.</p>

<p><img class="center" src="http://t-code.pl/wp-content/uploads/2011/11/ontowiki-unknown-user-login1.png" width="270" height="294" title="'ontowiki - unknown user login'" /></p>

<h3 id="solution-4">Solution</h3>

<p>The above problem remains a mystery, although I did manage to resolve it with help of <a href="http://sebastian.tramp.name">Sebastian Tramp</a>
from the University of Lepzig.</p>

<p>What I did was first log in to OntoWiki using Virtuoso’s admin credentials, which works as access for <em>SuperAdmin</em>.
Then I deleted Configuration KB as shown below.</p>

<p><img class="center" src="uploads/2011/11/delete-knowledgebase.png" width="515" height="305" title="'delete knowledgebase'" /></p>

<p>This caused Virtuoso to complain it could not get access to <code>%OntoWikiRoot%/libraries\Erfurt\Erfurt\include\SysOntLocal.rdf</code>
due to configuration. However this was not the case.</p>

<p>What helped though was deleting those two files and then deleting Virtuoso Database to make sure I was starting from scratch.</p>

<p>As an effect, the next time I ran OntoWiki a proper model was created and I was then able to log in as Admin.</p>

</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2021

    Tomasz Pluskiewicz


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'tcode';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://t-code.pl/blog/2011/11/installing-ontowiki-on-windows-with-virtuoso/';
        var disqus_url = 'http://t-code.pl/blog/2011/11/installing-ontowiki-on-windows-with-virtuoso/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
